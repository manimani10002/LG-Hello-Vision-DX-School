# 📘 11일차 TIL: 확률의 기초와 데이터의 통계적 요약

## 1. 확률과 확률 분포: 추론 통계의 징검다리

통계학의 목표는 **"일부(표본)를 보고 전체(모집단)를 예측(추론)"**하는 것입니다. 이 예측의 근거가 바로 확률입니다.

* **확률 변수():** 어떤 사건이 일어날 가능성이 수치로 할당된 변수입니다.
* **연속성으로의 변환:** 데이터의 개수()가 충분히 크다면, 계단식 모양의 이산형 분포도 부드러운 곡선 형태의 **연속형 분포**로 간주하여 복잡한 수학적 계산을 수행할 수 있습니다.
* **정규분포 (Normal Distribution):** 자연계와 사회 현상에서 가장 흔히 발견되는 종 모양의 분포입니다.
* **유의수준과 오류:** 정규분포의 꼬리는 이론적으로 0에 닿지 않고 무한히 뻗어 나갑니다. 이 때문에 우리는 100% 확신할 수 없으며, **제1종 오류**(실제로는 맞는데 틀리다고 할 확률)를 허용하는 기준인 **유의수준(p-value의 기준)**을 설정하게 됩니다.



---

## 2. 기술통계학: 데이터 요약의 기술

데이터의 특징을 숫자로 압축하여 표현하는 방법입니다.

### 2.1 중심과 퍼짐 (Mean, Variance, SD)

* **평균(Mean):** 모든 값을 더해 개수로 나눈 값입니다. **이상치(Outlier)**가 하나만 있어도 값이 크게 변하는 단점이 있습니다.
* **분산(Variance, ):** 데이터가 평균에서 얼마나 멀리 떨어져 있는지(편차)를 제곱하여 평균낸 값입니다.
* **왜 (n-1)로 나누나요? (자유도):** 우리가 가진 것은 표본입니다. 표본으로 전체(모집단)의 분산을 추정할 때 으로 나누면 실제보다 작게 계산되는 경향(편향)이 있습니다. 이를 보정하여 더 정확하게 예측하기 위해 '자유도' 개념인 을 사용합니다.


* **표준편차(SD, ):** 분산에 루트를 씌운 값입니다. 분산은 제곱을 해서 단위가 커졌으므로, 다시 원래 데이터와 단위를 맞추기 위해 사용합니다.

### 2.2 변동계수 (CV: Coefficient of Variation)

* **정의:** 
* **용도:** 단위나 평균이 서로 다른 두 집단의 **상대적인 흩어짐**을 비교할 때 씁니다. (예: 코끼리의 몸무게 편차 vs 쥐의 몸무게 편차)
* **해석:**
* **CV가 크다:** 평균 대비 변동성이 크다  데이터가 불안정하고 예측하기 어렵다.
* **CV가 작다:** 평균 근처에 조밀하게 모여 있다  일관성이 있고 안정적이다.



---

## 3. 헷갈리는 용어 정리: 오차(Error) 시리즈

| 용어 | 한 문장 요약 | 비유 |
| --- | --- | --- |
| **표본오차** | 표본을 뽑았기 때문에 발생하는 전체와의 차이 | "국 한 숟갈 맛본 게 전체 솥 맛과 똑같지는 않음" |
| **표준편차 (SD)** | **개별 데이터**들이 평균에서 얼마나 떨어져 있는가 | "우리 반 애들 키가 얼마나 들쭉날쭉한가" |
| **표준오차 (SE)** | **표본 평균**들이 실제 모집단 평균과 얼마나 차이 나는가 | "여러 번 국을 떠먹었을 때, 그 평균들이 얼마나 정확한가" |

> **💡 평균의 표준오차 (SEM):** 우리가 구한 표본 평균이 얼마나 믿을만한지 나타내는 지표입니다. 표본의 개수()가 많아질수록 표준오차는 줄어들며, 평균값이 더 정밀해집니다.

---

## 4. 분포의 형태와 데이터 변환 (Skewness)

### 4.1 왜도 (Skewness: 비대칭도)

* **왜도 > 0 (Positive):** 꼬리가 **오른쪽**으로 길게 늘어짐. (대부분 작은 값에 몰려 있음)
* **왜도 < 0 (Negative):** 꼬리가 **왼쪽**으로 길게 늘어짐. (대부분 큰 값에 몰려 있음)

### 4.2 자료 변환 (Data Transformation)은 왜 하나요?

통계 모델은 대부분 데이터가 '예쁜 종 모양(정규분포)'이라고 가정하고 작동합니다. 데이터가 한쪽으로 너무 치우쳐 있으면 결과가 왜곡되므로 모양을 잡아주는 것입니다.

* **오른쪽으로 치우친 경우(로그/루트):** 큰 값들 사이의 간격은 좁히고 작은 값들의 간격은 넓혀서 꼬리를 안으로 당깁니다. (예: 소득 데이터)
* **왼쪽으로 치우친 경우(제곱/세제곱):** 큰 값들을 더 크게 만들어 뭉쳐 있는 부분을 뒤로 펼쳐줍니다.

---

## 5. 사분위수와 박스플롯 (Boxplot)

* **IQR (사분위범위):** . 데이터의 중심 50%가 모여 있는 구간입니다.
* **이상치 판별:** 보통  보다 크거나,  보다 작으면 이상치로 간주합니다.

---

## 6. R 실습 분석 요약

11일차 R 실습의 핵심은 **"데이터의 상태를 확인하고(EDA), 시각화에 적합한 타입으로 변환하여, 그래프로 해석하는 것"**입니다. 정리하신 내용을 바탕으로 실무에서 바로 쓸 수 있는 코드 가이드로 재구성해 드립니다.

---

### 6.1 데이터 확인 및 전처리 (EDA & Type Conversion)

분석 전 데이터의 구조를 파악하고, 수치형 데이터를 범주형(Factor)으로 바꾸는 과정은 시각화의 필수 단계입니다.

```r
# 1. 데이터 기본 정보 확인
data(ToothGrowth)        # 내장 데이터 불러오기
str(ToothGrowth)         # 데이터 구조(Structure) 확인: 타입, 컬럼명 등
summary(ToothGrowth)     # 기술통계량(평균, 사분위수 등) 요약
head(ToothGrowth, 5)     # 상위 5개 데이터 확인

# 2. 데이터 타입 변환 (중요!)
# dose가 숫자(0.5, 1.0...)로 되어 있으면 그래프에서 그룹화가 안 될 수 있음
# 이를 '범주형(Factor)'으로 변환해야 박스플롯이 올바르게 그려짐
ToothGrowth$dose <- as.factor(ToothGrowth$dose)

# 확인: num(숫자)에서 Factor(범주)로 바뀌었는지 체크
str(ToothGrowth$dose)

```

---

### 6.2 기본 시각화: `boxplot()` 함수

R에 내장된 기본 함수로 빠르게 데이터의 분포와 이상치를 확인할 때 사용합니다.

```r
# 공식: boxplot(종속변수(y) ~ 독립변수(x), data = 데이터셋, ...)
boxplot(weight ~ feed, data = chickwts,
        main = '먹이 종류별 닭의 무게',    # 제목
        xlab = '먹이 종류',               # x축 이름
        ylab = '무게',                    # y축 이름
        col = terrain.colors(6),          # 색상 적용 (6가지)
        border = "black")                 # 테두리 색상

```

---

### 6.3 심화 시각화: `ggplot2` 패키지

실무에서 가장 많이 쓰이는 도구로, 여러 변수를 동시에 비교하거나 디자인을 정교하게 다룰 때 유리합니다.

```r
# 패키지 설치 및 로드
# install.packages("ggplot2")
library(ggplot2)

# ggplot(데이터, aes(x축, y축, fill=색상구분)) + 그래프형태 + 옵션
ggplot(ToothGrowth, aes(x = dose, y = len, fill = supp)) +
  geom_boxplot() +                         # 박스플롯 그리기
  labs(title = "비타민 C 공급원 및 용량별 치아 성장 비교",
       x = "투여량 (mg/day)",
       y = "치아 길이",
       fill = "공급 방법(VC/OJ)") +         # 범례 제목
  theme_minimal() +                        # 깔끔한 테마 적용
  scale_fill_brewer(palette = "Set2")      # 예쁜 색상 팔레트 적용

```

---

### 6.4 실습 코드 활용 예시 (해석 방법)

위 코드를 실행한 후, 결과물을 아래와 같은 관점으로 해석할 수 있어야 합니다.

| 코드 요소 | 분석 포인트 | 해석 가이드 |
| --- | --- | --- |
| **중앙값 (굵은 선)** | 중심 경향성 | 선이 높을수록 해당 그룹의 전반적인 성적이 높음 |
| **박스 높이 (IQR)** | 데이터의 밀집도 | 박스가 짧을수록 데이터가 일관적임 (변동성이 낮음) |
| **수염 (Whiskers)** | 데이터의 범위 | 수염이 길수록 데이터가 넓게 퍼져 있음 |
| **점 (Outliers)** | 이상치 | 일반적인 범위를 벗어난 특이 케이스가 존재함 |

---

#### 💡 실습 꿀팁 요약

1. **`str()`는 필수:** 그래프가 안 그려진다면 대부분 데이터 타입(Factor 여부) 문제입니다.
2. **`$` 기호 활용:** `chickwts$weight`처럼 특정 컬럼만 콕 집어서 연산할 수 있습니다.
3. **`super()`와 유사한 R의 방식:** 파이썬 객체지향에서 부모를 부르듯, R에서는 `data$column` 형태로 데이터 객체 내부의 속성에 접근하여 값을 수정합니다.
